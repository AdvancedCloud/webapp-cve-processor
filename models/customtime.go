package models

import (
	"errors"
	"time"
)

type CustomTime struct {
	time.Time
}

var customTimeFormats = []string{
	"2006-01-02T15:04:05.000Z",
	"2006-01-02T15:04:05Z",
	"2006-01-02T15:04:05",
}

func (ct *CustomTime) UnmarshalJSON(b []byte) error {
	str := string(b)
	str = str[1 : len(str)-1] // Remove the surrounding quotes

	var parseErr error
	for _, format := range customTimeFormats {
		t, err := time.Parse(format, str)
		if err == nil {
			ct.Time = t
			return nil
		}
		parseErr = err
	}
	return errors.New("error parsing time: " + str + ": " + parseErr.Error())
}
